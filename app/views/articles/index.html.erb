<%
  # TODO: Make this more dynamic and nicer
  authors = {
    "Richard van der Oost" => { headshot: "richard", role: "Founder" },
    "Johnson Martin" => { headshot: "johnson", role: "Blender Blogger" },
    "Awe Kayode" => { headshot: "awe", role: "Blender Blogger" },
    "Mike Futcher" => { headshot: "mike", role: "Blender YouTuber" },
    "Kat Loveland" => { headshot: "kat", role: "Tech. Support" },
  }
%>

<div class="bg-white py-16 sm:py-24 dark:bg-gray-900">
  <div class="mx-auto max-w-7xl px-6 lg:px-8">
    <div class="mx-auto max-w-2xl text-center">
      <h2 class="text-4xl font-semibold tracking-tight text-balance text-gray-900 sm:text-5xl dark:text-white">Blender Articles</h2>
      <p class="mt-2 text-lg/8 text-gray-600 dark:text-gray-300">Learn more about Blender and fast rendering.</p>
    </div>
    <div class="mx-auto mt-16 grid max-w-2xl grid-cols-1 gap-x-8 gap-y-20 lg:mx-0 lg:max-w-none lg:grid-cols-3">

      <% @articles.each do |article| %>
        <article class="flex flex-col items-start justify-between">
          <div class="relative w-full">
            <img src="https://res.cloudinary.com/blendergrid/image/upload/c_fill,f_auto,w_1344/articles/<%= article.slug %>/<%= article.image_url %>" class="aspect-video w-full rounded-2xl bg-gray-100 object-cover sm:aspect-2/1 lg:aspect-3/2 dark:bg-gray-800" loading="lazy" />
            <div class="absolute inset-0 rounded-2xl inset-ring inset-ring-gray-900/10 dark:inset-ring-white/10"></div>
          </div>
          <div class="flex max-w-xl grow flex-col justify-between">
            <div class="mt-8 flex items-center gap-x-4 text-xs">
              <%= time_tag article.published_at.to_date, article.published_at.strftime("%b %-d, %Y"), class: "text-gray-500 dark:text-gray-400" if article.published_at %>

              <!-- TODO: Add tags and make them clickable links - "hover:bg-gray-100  dark:hover:bg-gray-800" -->
              <span class="relative z-10 rounded-full bg-gray-50 px-3 py-1.5 font-medium text-gray-600  dark:bg-gray-800/60 dark:text-gray-300">Blender</span>
            </div>
            <div class="group relative grow">
              <h3 class="mt-3 text-lg/6 font-semibold text-gray-900 group-hover:text-gray-600 dark:text-white dark:group-hover:text-gray-300">
                <%= link_to article do %>
                  <span class="absolute inset-0"></span>
                  <%= article.title %>
                <% end %>
              </h3>
              <p class="mt-5 line-clamp-3 text-sm/6 text-gray-600 dark:text-gray-400">
                <%= article.excerpt %>
              </p>
            </div>
            <div class="relative mt-8 flex items-center gap-x-4 justify-self-end">
              <img src="https://res.cloudinary.com/blendergrid/image/upload/f_auto,w_80,h_80/headshots/<%= authors.dig(article.user.name, :headshot) %>" alt="<%= article.user.name %>" class="size-10 rounded-full bg-gray-100 dark:bg-gray-800" />
              <div class="text-sm/6">
                <p class="font-semibold text-gray-900 dark:text-white">
                <span>
                  <span class="absolute inset-0"></span>
                  <%= article.user.name %>
                </span>
                </p>
                <p class="text-gray-600 dark:text-gray-400"><%= authors.dig(article.user.name, :role) %></p>
              </div>
            </div>
          </div>
        </article>
      <% end %>

    </div>
  </div>
</div>
